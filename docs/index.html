<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Mein persÃ¶nlicher KI-Assistent</title>
  <style>
    body { font-family: sans-serif; margin: 0; padding: 0; }
    header { padding: 1rem; background: #f0f0f0; }
    main { display: flex; gap: 1rem; padding: 1rem; }
    section { flex: 1; border: 1px solid #ddd; padding: 0.5rem; }
    h2 { margin-top: 0; }
  </style>
</head>
<body>
  <header>
    <h1>Mein KI-Assistent</h1>
  </header>
  <main>
    <section id="calendar">
      <h2>Kalender</h2>
      <!-- spÃ¤ter Kalender-EintrÃ¤ge -->
    </section>
    <section id="todos">
      <h2>ToDos</h2>
      <!-- spÃ¤ter Aufgaben -->
    </section>
    <section id="notes">
      <h2>Notizen</h2>
      <!-- spÃ¤ter Notizen -->
    </section>
    <section id="assistant" style="padding: 1rem;">
      <h2>Frag deinen Assistenten</h2>
        <form id="ask-form">
          <input
            id="question"
            type="text"
            placeholder="Was soll ich fÃ¼r dich planen?"
            style="width: 60%; padding: 0.5rem;"
          />
          <button type="submit">Fragen</button>
        </form>
        <p id="answer" style="margin-top: 1rem; font-style: italic;">
          Noch keine Frage gestellt.
        </p>
    </section>
  </main>
  <script>
  const form = document.getElementById("ask-form");
  const input = document.getElementById("question");
  const answerEl = document.getElementById("answer");

  form.addEventListener("submit", async (event) => {
    event.preventDefault();
    const question = input.value.trim();
    if (!question) return;

    answerEl.textContent = "Ich denke nachâ€¦ ðŸ¤”";

    try {
      const response = await fetch("http://localhost:8000/ask", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({ question }),
      });

      if (!response.ok) {
        throw new Error("HTTP " + response.status);
      }

      const data = await response.json();
      answerEl.textContent = data.answer || JSON.stringify(data);
    } catch (err) {
      console.error(err);
      answerEl.textContent =
        "Fehler beim Kontakt mit dem lokalen Assistenten. LÃ¤uft Docker?";
    }
  });
</script>
</body>
</html>
